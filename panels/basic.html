<div>
	<div id=toolbar__ID>
		<a id=back__ID>Back</a><span class=tab__ID></span><span id=nav_link__ID></span>
	</div>
	<div id=panel__ID style='clear:left;'>
	</div>
</div>
<script>
//---------------------------------------------
function F__ID(){
	//---------------------------------------------
	VmInclude:__LIB__/vmiis/Common-Code/navigation/navigation.js
	VmInclude:__LIB__/vmiis/Common-Code/style/ease-in-out.js
	//---------------------------------------------
	var json;
	//---------------------------------------------
	$('#D__ID').on('load',function(){
		json=_module.var;
		_nav_name=json.panel.name;
		_set_nav_link();
		var txt="";
		for(i=0;i<json.panel.columns.length;i++){
			txt+="<div class=nav__ID>";
			for(j=0;j<json.panel.columns[i].sections.length;j++){
				var header=json.panel.columns[i].sections[j].name;
				txt+="<span>"+$('<div/>').html(header).text()+"</span><ul>";
				for(k=0;k<json.panel.columns[i].sections[j].tasks.length;k++){
					var task=json.panel.columns[i].sections[j].tasks[k].name;
					txt+="<li data-i="+i+" data-j="+j+" data-k="+k+">"+$('<div/>').html(task).text()+"</li>";
				}
				txt+="</ul>";
			}
			txt+="</div>";
		}
		$('#panel__ID').html(txt);
		//---------------------------------------------
		$('#panel__ID li').on('click',function(){
			var i=$(this).attr('data-i');
			var j=$(this).attr('data-j');
			var k=$(this).attr('data-k');
			load_module(i,j,k)
		});
		//---------------------------------------------
		/*
		$('#panel__ID li').each(function(){
			set_li_permission($(this),module_records)
		})
		*/
		//---------------------------------------------
		var load_module=function(I,J,K){
			var url=json.panel.columns[I].sections[J].tasks[K].url;
			var table_id=json.panel.columns[I].sections[J].tasks[K].table_id;
			for(var i=0;i<$vm.trust_path.length;i++){
				var len=$vm.trust_path[i].length;
				if(url.indexOf($vm.trust_path[i])!==-1 && url.substring(0,len)==$vm.trust_path[i]){
					var v={}
					try{
						var obj=$vm.vm['__ID'].op.record.Input;
						if(obj[0]!='{') obj='{'+obj+'}';
						v=JSON.parse(obj);
						v.UID=$vm.vm['__ID'].op.record.UID;
					}catch (e) {}
					var module="M"+$vm.vm['__ID'].op.record.UID+"_"+I+"_"+J+"_"+K;
					if($vm.module_list[module]==undefined){
						$vm.module_list[module]={
							table_id:table_id,
							url:url,
							var:v,
						}
					}
					var op={ //transfer parent module and record, because this is a panel module
						mobj:$vm.vm['__ID'].op.mobj,
						record:$vm.vm['__ID'].op.record,
						json:$vm.vm['__ID'].op.json,
					}
					$vm.load_module_by_name(module,$vm.root_layout_content_slot,op)
					return;
				}
			}
		}
		//---------------------------------------------
	});
	//---------------------------------------------
}
</script>
<style>
    VmInclude:__LIB__/vmiis/Common-Code/navigation/navigation.css
    #D__ID{
        background: url("__LIB__/vmiis/common-code/image/texture.png");
    }
    .nav__ID span{
		margin-top: 10px;
        color:#005500;
    }
    .nav__ID li{
        padding-top:1px;
        padding-bottom:1px;
    }
    .nh__ID{
        color:#999!Important;
        font-size:8pt;
        font-weight: normal!Important;
        margin:0!Important;
    }
    @media screen and (max-width:900px){
        #D__ID{
            font-size:16pt;
        }
		.nav__ID li{
	        padding-top:3px;
	        padding-bottom:3px;
	    }
    }
</style>
