<section>
      VmInclude:__PARTS__/grid/grid.html
</section>
<script>
    function F__ID(){
        //-------------------------------------
        _fields="_Form,_Date_Entry,Applicant ID|UID,Applicant Name|Applicant,Alias,Place_of_birth,Country,State,City,Area,Marriage Status,Date of Marriage/De facto|Date_of_Marriage,Email,Contact phone Number in your home country,Contact phone Number in Australia,Residential Address in your home country (including Postcode)|Residential_Address_home_country,Residential Address in Australia (including Postcode)|Residential_Address_Australia";
        _fields+=",Submit Date|DateTime,Submitted by|Author,_Delete";
        //-------------------------------------
        VmInclude:__PARTS__/grid/grid.js
        VmInclude:__PARTS__/style/ease-in-out.js
        //-------------------------------------
        $("#title__ID").text('Applicant');
        $('#D__ID').on('load',function(){  _set_req(); _request_data();  })
        //-------------------------------------
        _cell_render=function(records,I,field,td,set_value,source){
            switch(field){
                case 'UID':
                    records[I].vm_custom[field]=true;
                    td.html(records[I].UID);
                    break;
                case 'Date_of_Marriage':
                    VmInclude:__PARTS__/grid/field_dob.js
                    break;
                case '_Date_Entry':
                    records[I].vm_custom[field]=true;
                    if(_records[I].UID===undefined) return;
                    td.html("<u style='cursor:pointer'>Data Entry..</u>");
                    td.find('u').on('click',function(){
						if(_module.var!=undefined){
	                        $vm.load_module_by_name(_module.var.data_entry_by_staff,$vm.root_layout_content_slot,{
	                            rid:_records[I].ID,applicant_uid:_records[I].UID,
	                            applicant:_records[I].Applicant,
	                        });
						}
						//********************************************************************
						else{
							var module="M_"+_sys.UID+"_client_child_panel";
							if($vm.module_list[module]==undefined){
								var url=$vm.url(_config.parameters.client_child_panel_url);
								if(url.indexOf('?')==-1) url=url+"?_v="+$vm.version;
								else url=url+"&_v="+$vm.version;
								url=$vm.url(url);
								console.log('LOAD CONFIG '+url.split('/').pop());
								$.get(url,function(text){
									var text=$('<div/>').html(text).text();
									//---------------------------
									try{ var config=JSON.parse(text);}
									catch (e){ alert("Error in config file\n"+e); return;}
									//-----------------------------------------------
									$vm.module_list[module]={url:config.url,var:{}}
									//---------------------------
									$vm.load_module_by_name(module,$vm.root_layout_content_slot,{
										//------------------------
										mobj:_mobj,
										record:records[I],
										sys:{
											config:config,
											UID:_sys.UID+"_client_child",
										},
										//------------------------
										child:"1",
										name:_records[I].Applicant,
										check_count_where:" where PUID="+records[I].UID,
									})
									//-----------------------------------------------
								},'text').fail(function() {
								    alert( "The file '"+url+"' doesn't exist!" );
								});
							}
							else{
								var id=$vm.module_list[module].id
								$vm.show_module(id,$vm.root_layout_content_slot,{
									record:records[I],
									child:"1",
									name:_records[I].Applicant,
									check_count_where:" where PUID="+records[I].UID,
								});
							}
						}
						//********************************************************************
                    });
                    break;
            }
        }
        //-------------------------------------
        _before_submit=function(record,dbv){
            return true;
        };
        //-------------------------------------
    }
</script>
<style>
    VmInclude:__PARTS__/grid/grid.css
</style>
